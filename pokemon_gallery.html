<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokeAkane ãƒã‚±ãƒ¢ãƒ³å›³é‘‘</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 20px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .header h1 {
            margin: 0;
            text-align: center;
            font-size: 2rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºãƒœã‚¿ãƒ³ï¼ˆã‚¿ã‚¤ãƒˆãƒ«å³ç«¯ï¼‰ */
        .chart-buttons {
            display: flex;
            gap: 10px;
        }

        .chart-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(45deg, #9c27b0, #673ab7);
            color: white;
            text-decoration: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            box-shadow: 0 3px 15px rgba(156, 39, 176, 0.3);
        }

        .chart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(156, 39, 176, 0.4);
            background: linear-gradient(45deg, #ab47bc, #7e57c2);
            color: white;
            text-decoration: none;
        }

        /* ä¸–ä»£åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ */
        .generation-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .gen-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(45deg, #ff6b9d, #4facfe);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .gen-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .gen-btn.active {
            background: linear-gradient(45deg, #43e97b, #38f9d7);
            transform: scale(1.05);
        }

        /* ã‚½ãƒ•ãƒˆæ¯ãƒœã‚¿ãƒ³ */
        .software-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .soft-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #ffa726, #ff7043);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.7rem;
            min-width: 40px;
        }

        .soft-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .soft-btn.active {
            background: linear-gradient(45deg, #66bb6a, #42a5f5);
            transform: scale(1.05);
        }

        /* æ¤œç´¢ã‚¨ãƒªã‚¢ */
        .search-area {
            display: grid;
            grid-template-columns: 1fr 180px 150px 150px;
            gap: 10px;
            align-items: center;
        }

        .search-box {
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            outline: none;
            font-size: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .type-select, .filter-select {
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            outline: none;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .type-filter-container {
            position: relative;
        }

        .type-dropdown summary {
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            outline: none;
            font-size: 0.9rem;
            cursor: pointer;
            list-style: none;
        }

        .type-checkbox-list {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            padding: 15px;
            min-width: 200px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .type-checkbox-list label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
        }

        .type-checkbox-list label:hover {
            background: #f8f9fa;
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-content {
            margin-top: 280px;
            padding: 20px;
        }

        .pokemon-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px 20px;
            row-gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        /* 30å€‹ã”ã¨ï¼ˆ5è¡Œã”ã¨ï¼‰ã«åŒºåˆ‡ã‚Šç·šã‚’å¼•ã */
        .pokemon-card:nth-child(30n) {
            position: relative;
        }

        .pokemon-card:nth-child(30n)::after {
            content: '';
            position: absolute;
            top: calc(100% + 25px);
            left: -100vw;
            right: -100vw;
            width: 200vw;
            height: 10px;
            background: #ff1493;
            z-index: 999;
            box-shadow: 0 3px 15px rgba(255, 20, 147, 0.9);
            border-radius: 5px;
            display: block !important;
            visibility: visible !important;
        }

        /* å®Ÿéš›ã®HTMLè¦ç´ ã¨ã—ã¦ã®åŒºåˆ‡ã‚Šç·š */
        .row-separator {
            grid-column: 1 / -1;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ff69b4, transparent);
            margin: 15px 0;
            width: 100%;
            border-radius: 2px;
        }

        .pokemon-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .pokemon-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b9d, #4facfe, #43e97b, #f093fb);
            border-radius: 17px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .pokemon-card:hover::before {
            opacity: 1;
        }

        .pokemon-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 105, 180, 0.4);
        }

        .pokemon-number {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .pokemon-image-container {
            position: relative;
            display: inline-block;
            margin-bottom: 8px;
        }

        .pokemon-image {
            width: 100px;
            height: 100px;
            object-fit: contain;
            margin-bottom: 10px;
            border-radius: 10px;
            background: #f8f9fa;
            padding: 5px;
        }

        .pokemon-name {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .pokemon-types {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
        }

        .type-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .type-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        /* ã‚¿ã‚¤ãƒ—åˆ¥è‰²åˆ†ã‘ */
        .type-ãƒãƒ¼ãƒãƒ« { background: #A8A878; }
        .type-ã»ã®ãŠ { background: #F08030; }
        .type-ã¿ãš { background: #6890F0; }
        .type-ã§ã‚“ã { background: #F8D030; }
        .type-ãã• { background: #78C850; }
        .type-ã“ãŠã‚Š { background: #98D8D8; }
        .type-ã‹ãã¨ã† { background: #C03028; }
        .type-ã©ã { background: #A040A0; }
        .type-ã˜ã‚ã‚“ { background: #E0C068; }
        .type-ã²ã“ã† { background: #A890F0; }
        .type-ã‚¨ã‚¹ãƒ‘ãƒ¼ { background: #F85888; }
        .type-ã‚€ã— { background: #A8B820; }
        .type-ã„ã‚ { background: #B8A038; }
        .type-ã‚´ãƒ¼ã‚¹ãƒˆ { background: #705898; }
        .type-ãƒ‰ãƒ©ã‚´ãƒ³ { background: #7038F8; }
        .type-ã‚ã { background: #705848; }
        .type-ã¯ãŒã­ { background: #B8B8D0; }
        .type-ãƒ•ã‚§ã‚¢ãƒªãƒ¼ { background: #EE99AC; }

        /* è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            color: white;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .pokemon-detail-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 0 auto;
        }

        /* é€²åŒ–è¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .evolution-display {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .evolution-step {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .evolution-step.branched {
            flex-direction: column;
            align-items: center;
        }

        .evolution-pokemon {
            text-align: center;
            transition: transform 0.3s ease;
        }

        .evolution-pokemon:hover {
            transform: scale(1.05);
        }

        .evolution-arrow {
            font-size: 1.5rem;
            color: #ff69b4;
            font-weight: bold;
            margin: 0 10px;
        }

        .evolution-branches {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .evolution-branch {
            text-align: center;
            transition: transform 0.3s ease;
        }

        .evolution-branch:hover {
            transform: scale(1.1);
        }

        .detail-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .detail-section h3 {
            margin: 0 0 10px 0;
            color: #43e97b;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        .external-links {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .external-link {
            padding: 8px 16px;
            background: linear-gradient(45deg, #ff6b9d, #4facfe);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .external-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .search-area {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .modal-body {
                grid-template-columns: 1fr;
            }
            
            .generation-buttons {
                gap: 5px;
            }
            
            .gen-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin: 50px 0;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <div class="header-top">
            <h1>PokeAkane ãƒã‚±ãƒ¢ãƒ³å›³é‘‘</h1>
            <div class="chart-buttons">
                <a href="type_chart.html" class="chart-btn">ğŸ“Š ã‚¿ã‚¤ãƒ—ç›¸æ€§è¡¨</a>
                <a href="nature_chart.html" class="chart-btn">ğŸŒŸ æ€§æ ¼è¡¨</a>
            </div>
        </div>
        
        <!-- ä¸–ä»£åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
        <div class="generation-buttons">
            <button class="gen-btn active" data-gen="all">å…¨å›½å›³é‘‘</button>
            <button class="gen-btn" data-gen="1">ç¬¬1ä¸–ä»£</button>
            <button class="gen-btn" data-gen="2">ç¬¬2ä¸–ä»£</button>
            <button class="gen-btn" data-gen="3">ç¬¬3ä¸–ä»£</button>
            <button class="gen-btn" data-gen="4">ç¬¬4ä¸–ä»£</button>
            <button class="gen-btn" data-gen="5">ç¬¬5ä¸–ä»£</button>
            <button class="gen-btn" data-gen="6">ç¬¬6ä¸–ä»£</button>
            <button class="gen-btn" data-gen="7">ç¬¬7ä¸–ä»£</button>
            <button class="gen-btn" data-gen="8">ç¬¬8ä¸–ä»£</button>
            <button class="gen-btn" data-gen="9">ç¬¬9ä¸–ä»£</button>
        </div>

        <!-- ã‚½ãƒ•ãƒˆæ¯ãƒœã‚¿ãƒ³ -->
        <div class="software-buttons">
            <button class="soft-btn active" data-soft="all">å…¨ã¦</button>
            <button class="soft-btn" data-soft="rby">èµ¤ç·‘é’ãƒ”ã‚«</button>
            <button class="soft-btn" data-soft="gsc">é‡‘éŠ€ã‚¯</button>
            <button class="soft-btn" data-soft="rse">RSE</button>
            <button class="soft-btn" data-soft="frlg">FRLG</button>
            <button class="soft-btn" data-soft="dpp">DPPt</button>
            <button class="soft-btn" data-soft="hgss">HGSS</button>
            <button class="soft-btn" data-soft="bw">BW</button>
            <button class="soft-btn" data-soft="b2w2">B2W2</button>
            <button class="soft-btn" data-soft="xy">XY</button>
            <button class="soft-btn" data-soft="oras">ORAS</button>
            <button class="soft-btn" data-soft="sm">SM</button>
            <button class="soft-btn" data-soft="usum">USUM</button>
            <button class="soft-btn" data-soft="lgpe">LGPE</button>
            <button class="soft-btn" data-soft="swsh">å‰£ç›¾</button>
            <button class="soft-btn" data-soft="bdsp">BDSP</button>
            <button class="soft-btn" data-soft="la">ãƒ¬ã‚¸ã‚§ã‚¢ãƒ«</button>
            <button class="soft-btn" data-soft="sv">SV</button>
            <button class="soft-btn" data-soft="za">ZA</button>
        </div>

        <!-- æ¤œç´¢ã‚¨ãƒªã‚¢ -->
        <div class="search-area">
            <input type="text" class="search-box" id="searchInput" placeholder="ãƒã‚±ãƒ¢ãƒ³åã¾ãŸã¯å›³é‘‘No.ã§æ¤œç´¢...">
            
            <div class="type-filter-container">
                <details class="type-dropdown">
                    <summary>ã‚¿ã‚¤ãƒ—é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</summary>
                    <div class="type-checkbox-list">
                        <label><input type="checkbox" value="ãƒãƒ¼ãƒãƒ«"> ãƒãƒ¼ãƒãƒ«</label>
                        <label><input type="checkbox" value="ã»ã®ãŠ"> ã»ã®ãŠ</label>
                        <label><input type="checkbox" value="ã¿ãš"> ã¿ãš</label>
                        <label><input type="checkbox" value="ã§ã‚“ã"> ã§ã‚“ã</label>
                        <label><input type="checkbox" value="ãã•"> ãã•</label>
                        <label><input type="checkbox" value="ã“ãŠã‚Š"> ã“ãŠã‚Š</label>
                        <label><input type="checkbox" value="ã‹ãã¨ã†"> ã‹ãã¨ã†</label>
                        <label><input type="checkbox" value="ã©ã"> ã©ã</label>
                        <label><input type="checkbox" value="ã˜ã‚ã‚“"> ã˜ã‚ã‚“</label>
                        <label><input type="checkbox" value="ã²ã“ã†"> ã²ã“ã†</label>
                        <label><input type="checkbox" value="ã‚¨ã‚¹ãƒ‘ãƒ¼"> ã‚¨ã‚¹ãƒ‘ãƒ¼</label>
                        <label><input type="checkbox" value="ã‚€ã—"> ã‚€ã—</label>
                        <label><input type="checkbox" value="ã„ã‚"> ã„ã‚</label>
                        <label><input type="checkbox" value="ã‚´ãƒ¼ã‚¹ãƒˆ"> ã‚´ãƒ¼ã‚¹ãƒˆ</label>
                        <label><input type="checkbox" value="ãƒ‰ãƒ©ã‚´ãƒ³"> ãƒ‰ãƒ©ã‚´ãƒ³</label>
                        <label><input type="checkbox" value="ã‚ã"> ã‚ã</label>
                        <label><input type="checkbox" value="ã¯ãŒã­"> ã¯ãŒã­</label>
                        <label><input type="checkbox" value="ãƒ•ã‚§ã‚¢ãƒªãƒ¼"> ãƒ•ã‚§ã‚¢ãƒªãƒ¼</label>
                    </div>
                </details>
            </div>

            <select class="filter-select" id="sortOrder">
                <option value="id">ç•ªå·é †</option>
                <option value="stats_total">ç¨®æ—å€¤åˆè¨ˆé †</option>
                <option value="hp">HPé †</option>
                <option value="attack">æ”»æ’ƒé †</option>
                <option value="defense">é˜²å¾¡é †</option>
                <option value="special_attack">ç‰¹æ”»é †</option>
                <option value="special_defense">ç‰¹é˜²é †</option>
                <option value="speed">ç´ æ—©ã•é †</option>
            </select>

            <select class="filter-select" id="evolutionFilter">
                <option value="">é€²åŒ–ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</option>
                <option value="final">æœ€çµ‚é€²åŒ–ç³»</option>
                <option value="middle">ä¸­é–“é€²åŒ–</option>
                <option value="basic">é€²åŒ–å‰</option>
            </select>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="main-content">
        <div class="loading" id="loading">ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­...</div>
        <div class="pokemon-grid" id="pokemonGrid"></div>
    </div>

    <!-- è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="pokemonModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">ãƒã‚±ãƒ¢ãƒ³è©³ç´°</div>
                <button class="close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- è©³ç´°å†…å®¹ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let pokemonData = {};
        let generationData = {}; // ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        let currentGeneration = 'all';
        let currentSoftware = 'all';
        let filteredPokemon = [];

        // ä¸–ä»£åˆ¥ç¯„å›²
        const generations = {
            1: [1, 151],
            2: [152, 251], 
            3: [252, 386],
            4: [387, 493],
            5: [494, 649],
            6: [650, 721],
            7: [722, 809],
            8: [810, 905],
            9: [906, 1025]
        };

        // ã‚½ãƒ•ãƒˆæ¯ã®ãƒã‚±ãƒ¢ãƒ³ãƒªã‚¹ãƒˆ
        const softwarePokedex = {
            'rby': [1, 151], // èµ¤ç·‘é’ãƒ”ã‚«ãƒãƒ¥ã‚¦
            'gsc': [1, 251], // é‡‘éŠ€ã‚¯ãƒªã‚¹ã‚¿ãƒ«
            'rse': [1, 386], // ãƒ«ãƒ“ãƒ¼ãƒ»ã‚µãƒ•ã‚¡ã‚¤ã‚¢ãƒ»ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰
            'frlg': [1, 386], // ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¬ãƒƒãƒ‰ãƒ»ãƒªãƒ¼ãƒ•ã‚°ãƒªãƒ¼ãƒ³ï¼ˆç¬¬3ä¸–ä»£ã¾ã§ï¼‰
            'dpp': [1, 493], // ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ãƒ»ãƒ‘ãƒ¼ãƒ«ãƒ»ãƒ—ãƒ©ãƒãƒŠ
            'hgss': [1, 493], // ãƒãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‰ãƒ»ã‚½ã‚¦ãƒ«ã‚·ãƒ«ãƒãƒ¼ï¼ˆç¬¬4ä¸–ä»£ã¾ã§ï¼‰
            'bw': [1, 649], // ãƒ–ãƒ©ãƒƒã‚¯ãƒ»ãƒ›ãƒ¯ã‚¤ãƒˆ
            'b2w2': [1, 649], // ãƒ–ãƒ©ãƒƒã‚¯2ãƒ»ãƒ›ãƒ¯ã‚¤ãƒˆ2
            'xy': [1, 721], // Xãƒ»Y
            'oras': [1, 721], // ã‚ªãƒ¡ã‚¬ãƒ«ãƒ“ãƒ¼ãƒ»ã‚¢ãƒ«ãƒ•ã‚¡ã‚µãƒ•ã‚¡ã‚¤ã‚¢ï¼ˆç¬¬6ä¸–ä»£ã¾ã§ï¼‰
            'sm': [1, 809], // ã‚µãƒ³ãƒ»ãƒ ãƒ¼ãƒ³
            'usum': [1, 809], // ã‚¦ãƒ«ãƒˆãƒ©ã‚µãƒ³ãƒ»ã‚¦ãƒ«ãƒˆãƒ©ãƒ ãƒ¼ãƒ³
            'lgpe': [1, 151], // Let's Go ãƒ”ã‚«ãƒãƒ¥ã‚¦ãƒ»ã‚¤ãƒ¼ãƒ–ã‚¤ï¼ˆã‚«ãƒ³ãƒˆãƒ¼ã®ã¿ï¼‰
            'swsh': [1, 905], // ã‚½ãƒ¼ãƒ‰ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰
            'bdsp': [1, 493], // ãƒ–ãƒªãƒªã‚¢ãƒ³ãƒˆãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ãƒ»ã‚·ãƒ£ã‚¤ãƒ‹ãƒ³ã‚°ãƒ‘ãƒ¼ãƒ«
            'la': [1, 905], // ãƒ¬ã‚¸ã‚§ãƒ³ã‚ºã‚¢ãƒ«ã‚»ã‚¦ã‚¹ï¼ˆç¬¬8ä¸–ä»£ã¾ã§ï¼‰
            'sv': [1, 1025], // ã‚¹ã‚«ãƒ¼ãƒ¬ãƒƒãƒˆãƒ»ãƒã‚¤ã‚ªãƒ¬ãƒƒãƒˆ
            'za': [1, 1025] // ãƒã‚±ãƒ¢ãƒ³ãƒ¬ã‚¸ã‚§ãƒ³ã‚ºZ-Aï¼ˆäºˆæƒ³ï¼‰
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async () => {
            await loadPokemonData();
            setupEventListeners();
            displayPokemon();
        });

        // ãƒã‚±ãƒ¢ãƒ³ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ï¼ˆä¸–ä»£åˆ¥å¯¾å¿œï¼‰
        async function loadPokemonData() {
            try {
                document.getElementById('loading').textContent = 'ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...';
                
                // ä¸–ä»£åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒãƒ—
                const genFiles = {
                    'gen1': 'gen1_pokemon.json',
                    'gen2': 'gen2_pokemon.json', 
                    'gen3': 'gen3_pokemon.json',
                    'gen4': 'gen4_pokemon.json',
                    'gen5': 'gen5_pokemon.json',
                    'gen6': 'gen6_pokemon.json',
                    'gen7': 'gen7_pokemon.json',
                    'gen8': 'gen8_pokemon.json',
                    'gen9': 'gen9_pokemon.json',
                    'all': 'pokemon_data.json'  // å¾Œæ–¹äº’æ›ç”¨
                };

                // å…¨ä¸–ä»£ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦è¡Œèª­ã¿è¾¼ã¿
                const loadPromises = Object.values(genFiles).slice(0, -1).map(async file => {
                    try {
                        const response = await fetch(file);
                        if (!response.ok) throw new Error(`${file} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
                        return await response.json();
                    } catch (error) {
                        console.warn(`${file} ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:`, error);
                        return {};
                    }
                });

                // å…¨ä¸–ä»£ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆ
                const genDataArrays = await Promise.all(loadPromises);
                pokemonData = genDataArrays.reduce((combined, genData) => {
                    return { ...combined, ...genData };
                }, {});

                // ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚‚ä¿å­˜ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã®ãŸã‚ï¼‰
                generationData = {
                    'gen1': genDataArrays[0] || {},
                    'gen2': genDataArrays[1] || {},
                    'gen3': genDataArrays[2] || {},
                    'gen4': genDataArrays[3] || {},
                    'gen5': genDataArrays[4] || {},
                    'gen6': genDataArrays[5] || {},
                    'gen7': genDataArrays[6] || {},
                    'gen8': genDataArrays[7] || {},
                    'gen9': genDataArrays[8] || {},
                    'all': pokemonData
                };

                console.log('ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†:', Object.keys(pokemonData).length + 'åŒ¹');
                console.log('ä¸–ä»£ãƒ‡ãƒ¼ã‚¿è©³ç´°:', {
                    'gen1': Object.keys(generationData.gen1).length,
                    'gen2': Object.keys(generationData.gen2).length,
                    'gen3': Object.keys(generationData.gen3).length,
                    'gen4': Object.keys(generationData.gen4).length,
                    'gen5': Object.keys(generationData.gen5).length,
                    'gen6': Object.keys(generationData.gen6).length,
                    'gen7': Object.keys(generationData.gen7).length,
                    'gen8': Object.keys(generationData.gen8).length,
                    'gen9': Object.keys(generationData.gen9).length
                });
                document.getElementById('loading').style.display = 'none';
                
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è©¦ã™
                try {
                    const response = await fetch('pokemon_data.json');
                    pokemonData = await response.json();
                    generationData = { 'all': pokemonData };
                    console.log('ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èª­ã¿è¾¼ã¿å®Œäº†:', Object.keys(pokemonData).length + 'åŒ¹');
                    document.getElementById('loading').style.display = 'none';
                } catch (fallbackError) {
                    console.error('ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', fallbackError);
                    document.getElementById('loading').textContent = 'ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ';
                }
            }
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            // ä¸–ä»£ãƒœã‚¿ãƒ³
            document.querySelectorAll('.gen-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.gen-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    currentGeneration = e.target.dataset.gen;
                    displayPokemon();
                });
            });

            // ã‚½ãƒ•ãƒˆæ¯ãƒœã‚¿ãƒ³ï¼ˆç¾åœ¨ç„¡åŠ¹åŒ–ä¸­ï¼‰
            /*
            document.querySelectorAll('.soft-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.soft-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    currentSoftware = e.target.dataset.soft;
                    displayPokemon();
                });
            });
            */

            // æ¤œç´¢æ©Ÿèƒ½
            document.getElementById('searchInput').addEventListener('input', displayPokemon);
            document.getElementById('evolutionFilter').addEventListener('change', displayPokemon);
            document.getElementById('sortOrder').addEventListener('change', displayPokemon);

            // ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
            document.querySelectorAll('.type-checkbox-list input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', displayPokemon);
            });

            // ãƒ¢ãƒ¼ãƒ€ãƒ«
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('pokemonModal').addEventListener('click', (e) => {
                if (e.target.id === 'pokemonModal') closeModal();
            });
        }

        // ãƒã‚±ãƒ¢ãƒ³è¡¨ç¤ºï¼ˆä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰
        function displayPokemon() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedTypes = Array.from(document.querySelectorAll('.type-checkbox-list input[type="checkbox"]:checked')).map(cb => cb.value);
            const evolutionFilter = document.getElementById('evolutionFilter').value;
            const sortOrder = document.getElementById('sortOrder').value;

            // ç¾åœ¨ã®ä¸–ä»£ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã®ãŸã‚ï¼‰
            let currentGenData;
            if (currentGeneration === 'all') {
                currentGenData = pokemonData;
            } else {
                // ä¸–ä»£ç•ªå·ã‚’ã‚­ãƒ¼ã«ãƒãƒƒãƒ”ãƒ³ã‚°
                const genKey = `gen${currentGeneration}`;
                currentGenData = generationData[genKey] || {};
                console.log(`ä¸–ä»£${currentGeneration}ã®ãƒ‡ãƒ¼ã‚¿:`, Object.keys(currentGenData).length + 'åŒ¹');
            }

            // ãƒ‡ãƒ¼ã‚¿ãŒé…åˆ—ã‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ãƒã‚§ãƒƒã‚¯ã—ã¦é©åˆ‡ã«å‡¦ç†
            let pokemonArray;
            if (Array.isArray(currentGenData)) {
                pokemonArray = currentGenData;
            } else {
                pokemonArray = Object.values(currentGenData);
            }

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆé¸æŠã•ã‚ŒãŸä¸–ä»£ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿å‡¦ç†ï¼‰
            filteredPokemon = pokemonArray.filter(pokemon => {
                // æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (searchTerm) {
                    const nameMatch = pokemon.name.toLowerCase().includes(searchTerm);
                    const idMatch = pokemon.id.toString().includes(searchTerm);
                    const formattedId = pokemon.id.toString().padStart(3, '0');
                    const formattedIdMatch = formattedId.includes(searchTerm);
                    if (!nameMatch && !idMatch && !formattedIdMatch) return false;
                }

                // ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆè¤‡æ•°é¸æŠå¯¾å¿œï¼‰
                if (selectedTypes.length > 0) {
                    const hasAllSelectedTypes = selectedTypes.every(type => pokemon.types.includes(type));
                    if (!hasAllSelectedTypes) return false;
                }

                // é€²åŒ–ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆå®Ÿéš›ã®é€²åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ï¼‰
                if (evolutionFilter && evolutionFilter !== '') {
                    const evolution = pokemon.evolution || {};
                    const hasEvolutionFrom = evolution.prev !== null && evolution.prev !== undefined && evolution.prev !== '';
                    const hasEvolutionTo = evolution.next && Array.isArray(evolution.next) && evolution.next.length > 0;
                    
                    // console.log(`${pokemon.name} (ID: ${pokemon.id}) - é€²åŒ–å‰: ${hasEvolutionFrom}, é€²åŒ–å¾Œ: ${hasEvolutionTo}`);
                    
                    if (evolutionFilter === 'basic') {
                        // é€²åŒ–å‰ï¼šé€²åŒ–å¾ŒãŒã‚ã‚‹ãŒé€²åŒ–å‰ãŒãªã„ã‚‚ã®
                        if (!(hasEvolutionTo && !hasEvolutionFrom)) return false;
                    } else if (evolutionFilter === 'middle') {
                        // ä¸­é–“é€²åŒ–ï¼šé€²åŒ–å‰ã¨é€²åŒ–å¾Œã®ä¸¡æ–¹ãŒã‚ã‚‹ã‚‚ã®
                        if (!(hasEvolutionFrom && hasEvolutionTo)) return false;
                    } else if (evolutionFilter === 'final') {
                        // æœ€çµ‚é€²åŒ–ï¼šé€²åŒ–å¾ŒãŒãªã„ã‚‚ã®ï¼ˆç„¡é€²åŒ–ãƒã‚±ãƒ¢ãƒ³ã‚‚å«ã‚€ï¼‰
                        if (hasEvolutionTo) return false;
                    }
                }

                // ã‚½ãƒ•ãƒˆæ¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆå¾Œã§è©³ç´°ãªå›³é‘‘ãƒ‡ãƒ¼ã‚¿ã§å®Ÿè£…äºˆå®šï¼‰
                /*
                if (currentSoftware !== 'all') {
                    const softwareRange = softwarePokedex[currentSoftware];
                    if (softwareRange && (pokemon.id < softwareRange[0] || pokemon.id > softwareRange[1])) {
                        return false;
                    }
                }
                */

                return true;
            });

            // ã‚½ãƒ¼ãƒˆ
            if (sortOrder === 'stats_total') {
                filteredPokemon.sort((a, b) => {
                    const statsA = Object.values(a.stats).reduce((sum, stat) => sum + stat, 0);
                    const statsB = Object.values(b.stats).reduce((sum, stat) => sum + stat, 0);
                    return statsB - statsA; // é™é †
                });
            } else if (sortOrder === 'hp') {
                filteredPokemon.sort((a, b) => b.stats.hp - a.stats.hp);
            } else if (sortOrder === 'attack') {
                filteredPokemon.sort((a, b) => b.stats.attack - a.stats.attack);
            } else if (sortOrder === 'defense') {
                filteredPokemon.sort((a, b) => b.stats.defense - a.stats.defense);
            } else if (sortOrder === 'special_attack') {
                filteredPokemon.sort((a, b) => b.stats.special_attack - a.stats.special_attack);
            } else if (sortOrder === 'special_defense') {
                filteredPokemon.sort((a, b) => b.stats.special_defense - a.stats.special_defense);
            } else if (sortOrder === 'speed') {
                filteredPokemon.sort((a, b) => b.stats.speed - a.stats.speed);
            } else {
                filteredPokemon.sort((a, b) => a.id - b.id); // ç•ªå·é †
            }

            renderPokemonGrid();
        }

        // ãƒã‚±ãƒ¢ãƒ³ã‚«ãƒ¼ãƒ‰æç”»
        function renderPokemonGrid() {
            const grid = document.getElementById('pokemonGrid');
            
            if (filteredPokemon.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: white; font-size: 1.2rem;">è©²å½“ã™ã‚‹ãƒã‚±ãƒ¢ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
                return;
            }

            let htmlContent = '';
            filteredPokemon.forEach((pokemon, index) => {
                // 30åŒ¹ï¼ˆæ¨ª5åˆ—ï¼‰ã”ã¨ã«åŒºåˆ‡ã‚Šç·šã‚’è¿½åŠ 
                if (index > 0 && index % 30 === 0) {
                    htmlContent += '<div class="row-separator"></div>';
                }
                
                const typesBadges = pokemon.types.map(type => 
                    `<span class="type-badge type-${type}">
                        <img src="type_images/${type}_backup.png" class="type-icon" alt="${type}">
                        ${type}
                    </span>`
                ).join('');

                htmlContent += `
                    <div class="pokemon-card" onclick="showPokemonDetail(${pokemon.id})">
                        <div class="pokemon-number">No.${pokemon.id.toString().padStart(3, '0')}</div>
                        <div class="pokemon-image-container">
                            <img src="pokemon_images/normal/${pokemon.id.toString().padStart(3, '0')}.png" 
                                 alt="${pokemon.name}" 
                                 class="pokemon-image" 
                                 id="pokemon-image-${pokemon.id}"
                                 loading="lazy"
                                 onerror="this.src='https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png'; this.onerror=function(){this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2Y4ZjlmYSIvPgogIDx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4jJHtwb2tlbW9uLmlkfTwvdGV4dD4KICA8dGV4dCB4PSI1MCIgeT0iNzAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Tm8gSW1hZ2U8L3RleHQ+Cjwvc3ZnPg==';}">
                        </div>
                        <div class="pokemon-name">${pokemon.name}</div>
                        <div class="pokemon-types">${typesBadges}</div>
                    </div>
                `;
            });

            grid.innerHTML = htmlContent;
        }

        // é€²åŒ–è¡¨ç¤ºã‚’ä½œæˆï¼ˆåˆ†å²é€²åŒ–å¯¾å¿œï¼‰
        function createEvolutionDisplay(pokemon) {
            const evolution = pokemon.evolution;
            let html = '<div class="evolution-display">';
            
            // é€²åŒ–å‰ãŒã‚ã‚‹å ´åˆ
            if (evolution.prev) {
                const prevPokemon = findPokemonById(evolution.prev);
                const prevName = prevPokemon ? prevPokemon.name : `No.${evolution.prev}`;
                html += `
                    <div class="evolution-step">
                        <div class="evolution-pokemon prev">
                            <img src="pokemon_images/normal/${evolution.prev.toString().padStart(3, '0')}.png" 
                                 alt="${prevName}" 
                                 style="width: 80px; height: 80px; object-fit: contain; border-radius: 10px; background: #f8f9fa;">
                            <div style="font-size: 0.8rem; margin-top: 5px;">${prevName}</div>
                        </div>
                        <div class="evolution-arrow">â†’</div>
                    </div>
                `;
            }
            
            // ç¾åœ¨ã®ãƒã‚±ãƒ¢ãƒ³ï¼ˆä¸­å¤®ã«å¤§ããè¡¨ç¤ºï¼‰
            html += `
                <div class="evolution-step current">
                    <div class="evolution-pokemon current">
                        <img src="pokemon_images/normal/${pokemon.id.toString().padStart(3, '0')}.png" 
                             alt="${pokemon.name}" 
                             style="width: 120px; height: 120px; object-fit: contain; border-radius: 15px; background: linear-gradient(145deg, #fff, #f0f0f0); box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);">
                        <div style="font-size: 1rem; margin-top: 8px; font-weight: bold; color: #ff69b4;">${pokemon.name}</div>
                    </div>
                </div>
            `;
            
            // é€²åŒ–å¾ŒãŒã‚ã‚‹å ´åˆ
            if (evolution.next && evolution.next.length > 0) {
                if (evolution.next.length === 1) {
                    // å˜ä¸€é€²åŒ–
                    const nextPokemon = findPokemonById(evolution.next[0]);
                    const nextName = nextPokemon ? nextPokemon.name : `No.${evolution.next[0]}`;
                    html += `
                        <div class="evolution-step">
                            <div class="evolution-arrow">â†’</div>
                            <div class="evolution-pokemon next">
                                <img src="pokemon_images/normal/${evolution.next[0].toString().padStart(3, '0')}.png" 
                                     alt="${nextName}" 
                                     style="width: 80px; height: 80px; object-fit: contain; border-radius: 10px; background: #f8f9fa;">
                                <div style="font-size: 0.8rem; margin-top: 5px;">${nextName}</div>
                            </div>
                        </div>
                    `;
                } else {
                    // åˆ†å²é€²åŒ–
                    html += `
                        <div class="evolution-step branched">
                            <div class="evolution-arrow">â†’</div>
                            <div class="evolution-branches">
                    `;
                    
                    evolution.next.forEach((nextId, index) => {
                        const nextPokemon = findPokemonById(nextId);
                        const nextName = nextPokemon ? nextPokemon.name : `No.${nextId}`;
                        html += `
                            <div class="evolution-branch" style="margin: 5px;">
                                <img src="pokemon_images/normal/${nextId.toString().padStart(3, '0')}.png" 
                                     alt="${nextName}" 
                                     style="width: 70px; height: 70px; object-fit: contain; border-radius: 8px; background: #f8f9fa;">
                                <div style="font-size: 0.75rem; margin-top: 3px; text-align: center;">${nextName}</div>
                            </div>
                        `;
                    });
                    
                    html += `
                            </div>
                        </div>
                    `;
                }
            }
            
            html += '</div>';
            return html;
        }

        // ãƒã‚±ãƒ¢ãƒ³IDã§æ¤œç´¢ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function findPokemonById(pokemonId) {
            // ã¾ãšçµ±åˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢
            let pokemon = pokemonData[pokemonId.toString()];
            
            // è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢
            if (!pokemon && generationData) {
                for (const genKey in generationData) {
                    const genData = generationData[genKey];
                    if (genData[pokemonId.toString()]) {
                        pokemon = genData[pokemonId.toString()];
                        break;
                    }
                }
            }
            
            return pokemon;
        }

        // ãƒã‚±ãƒ¢ãƒ³è©³ç´°è¡¨ç¤º
        function showPokemonDetail(pokemonId) {
            // å…¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢ï¼ˆçµ±åˆãƒ‡ãƒ¼ã‚¿ã¾ãŸã¯ç¾åœ¨ã®ä¸–ä»£ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ï¼‰
            let pokemon = pokemonData[pokemonId.toString()];
            
            // çµ±åˆãƒ‡ãƒ¼ã‚¿ã«ãªã„å ´åˆã¯ã€ä¸–ä»£åˆ¥ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢
            if (!pokemon && generationData) {
                for (const genKey in generationData) {
                    const genData = generationData[genKey];
                    if (genData[pokemonId.toString()]) {
                        pokemon = genData[pokemonId.toString()];
                        break;
                    }
                }
            }
            
            if (!pokemon) {
                console.error(`ãƒã‚±ãƒ¢ãƒ³ID ${pokemonId} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
                return;
            }

            const modal = document.getElementById('pokemonModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.textContent = `#${pokemon.id.toString().padStart(3, '0')} ${pokemon.name}`;
            
            // é€²åŒ–ç³»è¡¨ç¤ºã‚’æ”¹å–„ï¼ˆåˆ†å²é€²åŒ–å¯¾å¿œï¼‰
            const evolutionDisplay = createEvolutionDisplay(pokemon);

            modalBody.innerHTML = `
                <div>
                    <div style="text-align: center; margin-bottom: 20px;">
                        ${evolutionDisplay}
                    </div>
                    
                    <div class="detail-section">
                        <h3>åŸºæœ¬æƒ…å ±</h3>
                        <p><strong>ã‚¿ã‚¤ãƒ—:</strong> ${pokemon.types.join(' / ')}</p>
                        <p><strong>ç‰¹æ€§:</strong> ${pokemon.abilities.join(', ')}</p>
                        <p><strong>é«˜ã•:</strong> ${pokemon.height}m</p>
                        <p><strong>é‡ã•:</strong> ${pokemon.weight}kg</p>
                        <p><strong>ä¸–ä»£:</strong> ç¬¬${pokemon.generation}ä¸–ä»£</p>
                    </div>

                    <div class="external-links">
                        <a href="${pokemon.external_links.kouryaku}" target="_blank" class="external-link">å¾¹åº•æ”»ç•¥</a>
                        <a href="${pokemon.external_links.gamewith}" target="_blank" class="external-link">GameWith</a>
                        <a href="${pokemon.external_links.game8}" target="_blank" class="external-link">Game8</a>
                    </div>
                </div>

                <div>
                    <div class="detail-section">
                        <h3>ç¨®æ—å€¤</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span>HP</span>
                                <span>${pokemon.stats.hp}</span>
                            </div>
                            <div class="stat-item">
                                <span>æ”»æ’ƒ</span>
                                <span>${pokemon.stats.attack}</span>
                            </div>
                            <div class="stat-item">
                                <span>é˜²å¾¡</span>
                                <span>${pokemon.stats.defense}</span>
                            </div>
                            <div class="stat-item">
                                <span>ç‰¹æ”»</span>
                                <span>${pokemon.stats.special_attack}</span>
                            </div>
                            <div class="stat-item">
                                <span>ç‰¹é˜²</span>
                                <span>${pokemon.stats.special_defense}</span>
                            </div>
                            <div class="stat-item">
                                <span>ç´ æ—©ã•</span>
                                <span>${pokemon.stats.speed}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('pokemonModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ç”»åƒé–¢é€£ã®å‡¦ç†ï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰

        // åˆ©ç”¨å¯èƒ½ãªç”»åƒãƒªã‚¹ãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        const availableImages = {};

        // ç”»åƒé–¢é€£ã®å‡¦ç†ï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰
    </script>
</body>
</html>